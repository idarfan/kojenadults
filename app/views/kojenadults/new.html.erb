<h1>New kojenadult</h1>
<% js("sub_area" , "jquery.validate") %>
<% content_for :header do %>
  <script>
    // 前台驗證的語法,需搭配在控制器裏的acton
    /**/
    $.validator.messages.required = "請填寫此欄位";
    $.validator.messages.remote = "請修正此欄位";
    
    jQuery(function($){
      ///$(function() { alert('Ready to do your bidding!'); });     
      //alert($('#student_form').length + ' elements!');      
       $("#student_form").validate({
        rules: {
          "student[student_id]": {
            required: true,
            remote:"/students/student_id_check/"
          }
        },
        messages: {
          "student[student_id]": {
            required:function(){alert("請填寫學生ID....")},
            remote:function(){alert("這學生ID已經被使用....")}
          }
        }
      });
      //輸入前台學生驗證式搭配 remote 資料庫student_id 驗證
      
      $(".date_picker").datepicker({              
        showMonthAfterYear: true,
        dateFormat : 'yy-mm-dd',
        yearRange: '1928:2016',
        changeMonth: true,
        changeYear: true
      });      
      
      $(".main_area , .sub_area").change(function(){
        $("input.road_name_setting").each(function(){
          var temp = $(this).siblings("select.road_name_setting");
          if(($(this).attr("value") + "").length == 0){
            $(this).addClass("hidden").attr("value" , "").attr("name" , "");
            temp.removeClass("hidden").attr("name" , $(this).attr("ref"));
          }else{
            temp.addClass("hidden").attr("name" , "");
            $(this).removeClass("hidden").attr("name" , $(this).attr("ref"));
          }
          temp.find("option:not(.title)").remove();
        })
        
        if($('.main_area').attr("value") != "%" && $('.sub_area').attr("value") != "%"){
          var temp = $('.main_area').attr("value");
          var temp2 = $('.sub_area').attr("value");
          $.get("/maps/area_road_" + temp + "_" + temp2 , null, function(txt){
            $(".road_selector .first_title").html("★請下拉選擇").attr("selected" , "true");
            $(".road_selector").html($(".road_selector").html() + txt);
          });
        }else{
          $(this).siblings("select.road_name_setting").each(function(){
            $(this).find(".first_title").html("★請先選擇地區").attr("selected" , "true");
          })
        }
      })
      //slot吃角子老虎(拉霸)
      $("input.road_name_setting").keyup(function(e){
        if($(this).attr("value").length == 0 && (e.keyCode == 8 || e.keyCode == 46)){
          $(this).addClass("hidden").attr("name" , "");
          $(this).siblings("select.road_name_setting").removeClass("hidden").attr("name" , $(this).attr("ref")).find(".first_title").attr("selected" , "true");
        }else{
          $(this).siblings("select.road_name_setting").addClass("hidden").attr("name" , "");
          $(this).removeClass("hidden").attr("name" , $(this).attr("ref"));
        }
      }).each(function(){
        if($(this).attr("value").length > 1){
          $(this).siblings("select.road_name_setting").addClass("hidden").attr("name" , "");
          $(this).removeClass("hidden").attr("name" , $(this).attr("ref"));
        }else{
          $(this).addClass("hidden").attr("name" , "");
          $(this).siblings("select.road_name_setting").removeClass("hidden").attr("name" , $(this).attr("ref"));
        }
      })
      $("select.road_name_setting").live("change" , function(){
        if($(this).attr("value") == "%"){
          $(this).addClass("hidden").attr("name" , "");
          $(this).siblings("input.road_name_setting").removeClass("hidden").attr("name" , $(this).attr("ref"));
        }else{
          $(this).siblings("input.road_name_setting").addClass("hidden").attr("name" , "");
          $(this).removeClass("hidden").attr("name" , $(this).attr("ref"));
        }
      }).each(function(){
        if($(this).attr("value") == "%"){
          temp = $(this).find(".first_title");
          if(temp[0]){
            temp.attr("selected" , "true");
          }else{
            $(this).find("option:first").attr("selected" , "true");
          }
        }
      })
    })
  </script>
  <style>
    /* css no IE support */
    .hidden{
      display:none;
    }
      
    body {
      font-size:20px;
      line-height:20px;
      background: #fcfff4; /* Old browsers */
      background: -moz-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%); /* FF3.6+ */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fcfff4), color-stop(40%,#dfe5d7), color-stop(100%,#b3bead)); /* Chrome,Safari4+ */
      background: -webkit-linear-gradient(top, #fcfff4 0%,#dfe5d7 40%,#b3bead 100%); /* Chrome10+,Safari5.1+ */
      background: -o-linear-gradient(top, #fcfff4 0%,#dfe5d7 40%,#b3bead 100%); /* Opera11.10+ */
      background: -ms-linear-gradient(top, #fcfff4 0%,#dfe5d7 40%,#b3bead 100%); /* IE10+ */
      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfff4', endColorstr='#b3bead',GradientType=0 ); /* IE6-9 */
      background: linear-gradient(top, #fcfff4 0%,#dfe5d7 40%,#b3bead 100%); /* W3C */
    }
    input:hover , input:focus{      
      border:#ff9900 solid 3px;      
      -moz-border-radius: 5px;
      -webkit-border-radius: 5px;
      border-radius: 5px;
    }/*...okokok*/
    input {     
      border:solid 3px #e6cd8f;
      -moz-border-radius: 5px;
      -webkit-border-radius: 5px;
      border-radius: 5px; 
    }  
    .field1 {
      /* background-color: #A7C6E8; */
      margin-bottom: 5px;
      border:solid  #6f7D94;
      /* -moz-border-radius: 0px 5px 0px 5px; */
      -moz-border-radius-topleft: 5px;
      -moz-border-radius-topright: 5px;
      -webkit-border-top-left-radius: 5px;
      -webkit-border-top-right-radius: 5px;
      background-color: #E2EAFF;
        
    }
    .field2 {
      margin-top: 5px;
      border:solid #6F7D94;
      -moz-border-radius-bottomleft: 5px;
      -moz-border-radius-bottomright: 5px;
      -webkit-border-bottom-left-radius: 5px;
      -webkit-border-bottom-right-radius: 5px;
      background-color: #8090AB;
    }
    .centerline {
      margin: 5px auto;
      background: #e2eaff; /* Old browsers */
      background: -moz-linear-gradient(top, #e2eaff 0%, #6f7d94 100%); /* FF3.6+ */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e2eaff), color-stop(100%,#6f7d94)); /* Chrome,Safari4+ */
      background: -webkit-linear-gradient(top, #e2eaff 0%,#6f7d94 100%); /* Chrome10+,Safari5.1+ */
      background: -o-linear-gradient(top, #e2eaff 0%,#6f7d94 100%); /* Opera11.10+ */
      background: -ms-linear-gradient(top, #e2eaff 0%,#6f7d94 100%); /* IE10+ */
      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e2eaff', endColorstr='#6f7d94',GradientType=0 ); /* IE6-9 */
      background: linear-gradient(top, #e2eaff 0%,#6f7d94 100%); /* W3C */
    }   
  </style>
<% end %>

<%= render 'form' %>

<%= link_to 'Back', kojenadults_path %>
